## 기능 명세서
### 1. 기능 정의

1.1. 기능명

- 로그인 및 토큰 발급

1.2. 기능 설명 (요약)

- 사용자가 등록된 회원정보로 로그인을 하고, 성공 시 JWT 토큰을 발급받는다. 이 토큰은 이후 API 호출 시 인증을 위해 사용된다.


### 2. 개발 배경 및 목표

2.1. 현황 및 문제점 (AS-IS)

- 현재 사용자는 회원가입 후 로그인 기능을 통해 인증을 받아야 하며, 이 과정에서 JWT 토큰을 발급받아야 한다. 하지만 현재 로그인 기능이 구현되어 있지 않아 사용자가 인증을 받을 수 없다.

2.2. 개선 방향 및 기대 효과 (TO-BE)

- 로그인 기능을 구현하여 사용자가 회원가입 후 인증을 받을 수 있도록 한다. 이를 통해 API 호출 시 인증이 가능해지고, 보안성이 향상된다.

2.3. 핵심 목표

- 사용자가 회원가입 후 로그인 기능을 통해 JWT 토큰을 발급받을 수 있도록 한다. 이 토큰은 이후 API 호출 시 인증을 위해 사용된다.
- 토큰은 JWT 토큰 형식으로 발급된다.

### 3. 구현할 기능 목록 (체크리스트)

3.1. 사용자 관점 기능

- 사용자는 회원가입 후 로그인 기능을 통해 인증을 받을 수 있다.

3.2. 시스템 관점 기능

- 시스템은 사용자가 입력한 회원정보를 검증하고, 일치하는 경우 JWT 토큰을 발급한다.
- 토큰 발급 시, 사용자 정보를 포함한 JWT 토큰을 생성한다.
- 만료된 토큰에 대한 검증 로직을 구현한다.
- 토큰의 유효성 검증이 filter에서 이루어지도록 한다.


3.3. 비기능적 요구사항 (체크리스트)

성능 요구사항:

보안:
- JWT 토큰을 사용하여 API 호출 시 인증을 수행한다.

사용성:

신뢰성:
- 

### 4. 상세 설계

4.1. 정책

- 로그인 기능은 사용자가 회원가입 후 인증을 받을 수 있도록 한다.
- 로그인 시 JWT 토큰을 발급하며, 이 토큰은 이후 API 호출 시 인증을 위해 사용된다.
- 사용자는 다시 로그인하여 새로운 토큰을 발급받을 수 있다.
- 로그인 시도시 존재하지 않는 email로 요청하는 경우 400 예외가 발생되어야 한다.





4.2. 데이터 모델 (해당되는 경우)

테이블/컬렉션 변경 사항:

- 

새로운 데이터 구조:

```java
    record TokenHolder(String accessToken){
    }
```

4.3. API 설계 (해당되는 경우)


요청
- 메서드:
- 경로:
- 헤더
  ```
  Content-Type: application/json
  ```
- 본문
  ```
  
  ```
- curl 명령 예시
  ```bash
  curl -i -X METHOD 'path' \
  -H 'Content-Type: application/json' \
  -d '{
  }'
  ```

성공 응답
- 상태코드: 301 Created


### 5. 개발 및 테스트 체크리스트

5.1. 테스트


테스트

- [ ] 로그인 시도 시 등록되지 않은 email이면 400 예외가 발생한다.

- [ ] 로그인 시도 시 email에 상응하는 비밀번호가 누락이면 400 예외가 발생한다.

- [ ] 로그인 시도 시 잘못된 비밀번호를 입력하면 400 예외가 발생한다.

- [ ] 로그인 파라미터(email)가 잘못된 형식이면 400 예외가 발생한다.

- [ ] 로그인 성공 시 JWT 토큰이 정상적으로 발급된다.

- [ ] 토큰의 payload에 email 정보가 포함된다.

- [ ] 디코딩된 토큰은 원본 정보를 가지고 있어야한다.

- [ ] 만료된 토큰으로 접근 시 401 예외가 발생한다.

- [ ] 변조된 토큰으로 접근 시 401 예외가 발생한다.

- [ ] 토큰이 없는 경우 401 예외가 발생한다.

- [ ] header의 Authorization가 비어있는 경우 401 예외가 발생한다.

- [ ] 여러 번 로그인 시도해도 항상 새로운(유효한) 토큰이 발급된다.

### 6. 주요 고려사항 및 위험 요소

- 토큰 발급을 위한 salt 값은 안전하게 관리되어야 하며, 토큰의 서명 검증에 사용된다.
- 토큰의 만료 시간(exp 클레임)은 30분(30m) 이내로 설정된다.

### 7. 범위 외 항목

-

### 8. 참고 자료

- 
